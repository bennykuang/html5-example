<!DOCTYPE html>
<html>
	<head>
		<META charset="utf-8" />
	</head>
	<body>
		<canvas style="border:1px solid #CCC;" id="myCanvas"></canvas>
	</body>
	<script>
		var c = document.getElementById('myCanvas');
		var ctx = c.getContext('2d');
		
		var x = 100;//矩形开始坐标
		var y = 100;//矩形结束坐标
		var mx = 0;//0右1左
		var my = 0; //0下1上
		var ml = 1;//每次移动长度
		var w = 20;//矩形宽度
		var h = 20;//矩形高度
		var cw = 400;//canvas宽度
		var ch = 300; //canvas高度
		
		var interval = setInterval(function(){move(ctx);},1);
		
		function move(ctx){
			ctx.clearRect(0,0,cw,ch);
			ctx.fillStyle = "#EEEEFF";
			ctx.fillRect(0,0,cw,ch);
			ctx.fillStyle = 'red';
			ctx.fillRect(x,y,w,h);
			
			if(mx == 0){
				x = x + ml;
				if(x >= cw - 120){
					mx = 1;	
				}	
			}
			else{
				x = x - ml;
				if(x <= 0){
					mx = 0;	
				}	
			}
			
			if(my == 0){
				y = y + ml;
				if(y >= ch - 170){
					my = 1;	
				}	
			}
			else{
				y = y - ml;
				if(y <= 0){
					my = 0;	
				}	
			}
		}
		
	</script>
</html>